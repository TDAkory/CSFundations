- [The Book](chrome-extension://ikhdkkncnoglghljlkmcimlnlhkeamad/pdf-viewer/web/viewer.html?file=https%3A%2F%2Fcourse.ece.cmu.edu%2F~ece847c%2FS15%2Flib%2Fexe%2Ffetch.php%3Fmedia%3Dpart2_2_sorin12.pdf#=&zoom=125)

Many modern computer systems and most multicore chips (chip multiprocessors) support shared memory in hardware. In a shared memory system, each of the processor cores may read and write to a single shared address space. For a shared memory machine, the memory consistency model defines the architecturally visible behavior of its memory system. Consistency definitions provide rules about loads and stores (or memory reads and writes) and how they act upon memory. As part of supporting a memory consistency model, many machines also provide cache coherence protocols that ensure that multiple cached copies of data are kept up-to-date.

## 书籍基础信息（0.5小时）
- 作者：Vijay Nagarajan 等
- 版本：第2版（2020）
- 定位：计算机体系结构领域入门级专著
- 核心关键词：内存一致性、缓存一致性、共享内存、多核处理器
## 第一部分：基础概念（5小时）
- 第1章：一致性与相干性导论（2小时）
  - 内存一致性（定义、作用、核心规则）
  - 缓存一致性（问题本质、解决目标）
  - 异构系统中的一致性与相干性
  - 核心Quiz及答案解析
- 第2章：相干性基础（3小时）
  - 基准系统模型
  - 缓存不一致问题成因
  - 缓存一致性接口（一致性无关/一致性导向）
  - 一致性不变量（SWMR、数据值不变量）
  - 相干性粒度与适用场景
## 第二部分：内存一致性模型（10小时）
- 第3章：顺序一致性（SC）（3小时）
  - 共享内存行为问题
  - SC定义与核心思想
  - SC形式化描述
  - SC实现（朴素实现、缓存相干性集成实现、优化实现）
  - 原子操作与SC
  - MIPS R10000案例研究
- 第4章：全存储顺序（TSO）与x86内存模型（3小时）
  - TSO的动机（写缓冲区优化）
  - TSO核心思想与形式化
  - TSO实现（原子指令、FENCE指令）
  - SC与TSO对比
  - x86-TSO模型特性
- 第5章：松弛内存一致性（4小时）
  - 松弛模型动机（重排序优化空间）
  - 示例松弛模型XC（定义、形式化、实现）
  - 无数据竞争程序的顺序一致性（SC for DRF）
  - 核心概念（释放一致性、因果性、写原子性）
  - 案例研究（RISC-V RVWMO、IBM Power模型）
  - 高级语言内存模型（Java、C/C++）
## 第三部分：缓存一致性协议（12小时）
- 第6章：相干性协议概述（2小时）
  - 协议核心目标（维护一致性不变量）
  - 协议指定方法（表格化规范）
  - 简单协议示例
  - 协议设计空间（状态、事务、核心设计选项）
- 第7章：监听相干性协议（4小时）
  - 监听协议核心思想（广播+监听）
  - 基准MSI协议（原子/非原子请求场景）
  - 优化扩展（添加Exclusive状态、Owned状态）
  - 非原子总线适配
  - 总线互连网络优化
  - 案例研究（Sun Starfire E10000、IBM Power5）
- 第8章：目录相干性协议（4小时）
  - 目录协议核心思想（间接寻址+集中式状态跟踪）
  - 基准MSI目录协议（系统模型、实现、死锁避免）
  - 优化扩展（添加Exclusive状态、Owned状态）
  - 目录状态表示（粗粒度目录、有限指针目录）
  - 目录组织（DRAM备份、包容性目录缓存、空目录缓存）
  - 性能优化（分布式目录、非阻塞协议）
  - 案例研究（SGI Origin 2000、Coherent HyperTransport）
- 第9章：相干性高级主题（2小时）
  - 复杂系统模型适配（指令缓存、TLB、虚拟缓存等）
  - 性能优化（迁移共享优化、伪共享优化）
  - 活性维护（死锁、活锁、饥饿避免）
  - 令牌相干性协议
## 第四部分：异构系统与验证（5小时）
- 第10章：异构系统的一致性与相干性（3小时）
  - GPU一致性与相干性（架构演进、核心方案）
  - 异构一致性模型
  - 异构相干性协议
- 第11章：内存一致性模型与缓存相干性的指定与验证（2小时）
  - 指定方法（操作型指定、公理型指定）
  - 行为探索（Litmus测试、探索工具）
  - 实现验证（形式化方法、测试方法）
## 附录与参考文献（2.5小时）
- 作者传记
- 参考文献梳理（核心文献、扩展阅读）
- 术语表与核心概念索引